# Службы

Несколько терминов в документации для пользователей и программистов Windows имеют разные значения в разных контекстах. Например, слово "служба" может означать вызываемую процедуру в ОС, драйвер устройства или серверный процесс. Ниже описано, что означают определенные термины в этой книге:

* **Функции Windows API**: Это документированные, вызываемые подпрограммы в Windows API. Примеры: CreateProcess, CreateFile и GetMessage.
* **Нативные службы (или системные вызовы)**: Это недокументированные, базовые **службы** в ОС, которые могут быть вызваны из пользовательского режима. Например, NtCreateUserProcess — это внутренняя системная услуга, вызываемая функцией CreateProcess для создания нового процесса.
* **Функции поддержки ядра** : Это подпрограммы в Windows OS, которые могут быть вызваны только из режима ядра. Пример: ExAllocatePoolWithTag — это рутина, к которой обращаются драйверы устройств для выделения памяти из системных куч Windows (называемых пулами).
* **Службы Windows**: Это процессы, запускаемые диспетчером служб Windows. Например, служба Планировщика заданий работает в пользовательском режиме и поддерживает команду schtasks (похожую на команды UNIX at и cron). (Обратите внимание, что, хотя в реестре драйвера устройств Windows определяются как «службы», в этой книге они так не называются.)
* **Динамически подключаемые библиотеки (DLL)**: Это вызываемые подпрограммы, собранные в виде бинарного файла и которые могут динамически загружаться приложениями, использующими эти подпрограммы. Примеры: Msvcrt.dll (библиотека времени выполнения C) и Kernel32.dll (одна из библиотек подсистемы Windows API). Пользовательские компоненты и приложения Windows активно используют DLL. Преимущество DLL перед статическими библиотеками заключается в том, что приложения могут совместно использовать DLL, и Windows гарантирует, что в памяти имеется только одна копия кода DLL для всех приложений, которые на него ссылаются. Обратите внимание, что .NET библиотеки собираются как DLL, но без экспортируемых процедур. Вместо этого CLR анализирует скомпилированные метаданные для доступа к соответствующим типам.
